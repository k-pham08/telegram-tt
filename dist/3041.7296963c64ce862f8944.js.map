{"version":3,"file":"3041.7296963c64ce862f8944.js","mappings":"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","sources":["webpack://telegram-t/./src/components/auth/AuthCode.tsx","webpack://telegram-t/./src/components/auth/AuthPassword.tsx","webpack://telegram-t/./src/components/auth/AuthRegister.tsx","webpack://telegram-t/./src/components/common/PasswordForm.tsx","webpack://telegram-t/./src/components/common/PasswordMonkey.tsx","webpack://telegram-t/./src/components/ui/AvatarEditable.tsx","webpack://telegram-t/./src/components/ui/CropModal.tsx","webpack://telegram-t/./src/components/ui/Modal.tsx","webpack://telegram-t/./src/util/trapFocus.ts","webpack://telegram-t/./src/components/ui/Portal.ts","webpack://telegram-t/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://telegram-t/./src/hooks/useTimeout.ts","webpack://telegram-t/./src/util/captureKeyboardListeners.ts","webpack://telegram-t/./src/util/directInputManager.ts","webpack://telegram-t/./src/util/stopEvent.ts"],"sourcesContent":["import type { FormEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  useState, useEffect, useCallback, memo, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\nimport type { GlobalState } from '../../global/types';\n\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { pick } from '../../util/iteratees';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport InputText from '../ui/InputText';\nimport Loading from '../ui/Loading';\nimport { fallbackLangPackInitial as langPack } from '../../util/fallbackLangPackInitial';\n\ntype StateProps = Pick<GlobalState, 'authPhoneNumber' | 'authIsCodeViaApp' | 'authIsLoading' | 'authError'>;\n\nconst CODE_LENGTH = 5;\n\nconst AuthCode: FC<StateProps> = ({\n  authPhoneNumber,\n  authIsLoading,\n  authError,\n}) => {\n  const {\n    setAuthCode,\n    returnToAuthPhoneNumber,\n    clearAuthError,\n  } = getActions();\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [code, setCode] = useState<string>('');\n  const [isTracking, setIsTracking] = useState(false);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      inputRef.current!.focus();\n    }\n  }, []);\n\n  useHistoryBack({\n    isActive: true,\n    onBack: returnToAuthPhoneNumber,\n  });\n\n  const onCodeChange = useCallback((e: FormEvent<HTMLInputElement>) => {\n    if (authError) {\n      clearAuthError();\n    }\n\n    const { currentTarget: target } = e;\n    target.value = target.value.replace(/[^\\d]+/, '').substr(0, CODE_LENGTH);\n\n    if (target.value === code) {\n      return;\n    }\n\n    setCode(target.value);\n\n    if (!isTracking) {\n      setIsTracking(true);\n    } else if (!target.value.length) {\n      setIsTracking(false);\n    }\n\n    if (target.value.length === CODE_LENGTH) {\n      setAuthCode({ code: target.value });\n    }\n  }, [authError, clearAuthError, code, isTracking, setAuthCode]);\n\n  function handleReturnToAuthPhoneNumber() {\n    returnToAuthPhoneNumber();\n  }\n\n  return (\n    <div id=\"auth-code-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <div id=\"logo\" />\n        <h1>\n          {authPhoneNumber}\n          <div\n            className=\"auth-number-edit div-button\"\n            onClick={handleReturnToAuthPhoneNumber}\n            role=\"button\"\n            tabIndex={0}\n            title={lang('WrongNumber')}\n          >\n            <i className=\"icon icon-edit\" />\n          </div>\n        </h1>\n        <p className=\"note\">\n          {langPack.SentAppCode1.value} <br /> {langPack.SentAppCode2.value}\n        </p>\n        <div className=\"label\">\n          {langPack.EnterCode.value}\n        </div>\n        <InputText\n          ref={inputRef}\n          className=\"custom-input\"\n          id=\"sign-in-code\"\n          placeholder={lang('5 digit verification code')}\n          onInput={onCodeChange}\n          value={code}\n          error={authError && lang(authError)}\n          autoComplete=\"off\"\n          inputMode=\"numeric\"\n        />\n        {authIsLoading && <Loading />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['authPhoneNumber', 'authIsCodeViaApp', 'authIsLoading', 'authError']),\n)(AuthCode));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport useLang from '../../hooks/useLang';\n\nimport MonkeyPassword from '../common/PasswordMonkey';\nimport PasswordForm from '../common/PasswordForm';\n\ntype StateProps = Pick<GlobalState, 'authIsLoading' | 'authError' | 'authHint'>;\n\nconst AuthPassword: FC<StateProps> = ({\n  authIsLoading, authError, authHint,\n}) => {\n  const { setAuthPassword, clearAuthError } = getActions();\n\n  const lang = useLang();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleChangePasswordVisibility = useCallback((isVisible) => {\n    setShowPassword(isVisible);\n  }, []);\n\n  const handleSubmit = useCallback((password: string) => {\n    setAuthPassword({ password });\n  }, [setAuthPassword]);\n\n  return (\n    <div id=\"auth-password-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <MonkeyPassword isPasswordVisible={showPassword} />\n        <h1>{lang('Login.Header.Password')}</h1>\n        <p className=\"note\">{lang('Login.EnterPasswordDescription')}</p>\n        <PasswordForm\n          clearError={clearAuthError}\n          error={authError && lang(authError)}\n          hint={authHint}\n          isLoading={authIsLoading}\n          isPasswordVisible={showPassword}\n          onChangePasswordVisibility={handleChangePasswordVisibility}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['authIsLoading', 'authError', 'authHint']),\n)(AuthPassword));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, { useState, memo, useCallback } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport InputText from '../ui/InputText';\nimport AvatarEditable from '../ui/AvatarEditable';\n\ntype StateProps = Pick<GlobalState, 'authIsLoading' | 'authError'>;\n\nconst AuthRegister: FC<StateProps> = ({\n  authIsLoading, authError,\n}) => {\n  const { signUp, clearAuthError, uploadProfilePhoto } = getActions();\n\n  const lang = useLang();\n  const [isButtonShown, setIsButtonShown] = useState(false);\n  const [croppedFile, setCroppedFile] = useState<File | undefined>();\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n\n  const handleFirstNameChange = useCallback((event: ChangeEvent<HTMLInputElement>) => {\n    if (authError) {\n      clearAuthError();\n    }\n\n    const { target } = event;\n\n    setFirstName(target.value);\n    setIsButtonShown(target.value.length > 0);\n  }, [authError, clearAuthError]);\n\n  const handleLastNameChange = useCallback((event: ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n\n    setLastName(target.value);\n  }, []);\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    signUp({ firstName, lastName });\n\n    if (croppedFile) {\n      uploadProfilePhoto({ file: croppedFile });\n    }\n  }\n\n  return (\n    <div id=\"auth-registration-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <form action=\"\" method=\"post\" onSubmit={handleSubmit}>\n          <AvatarEditable onChange={setCroppedFile} />\n          <h2>{lang('YourName')}</h2>\n          <p className=\"note\">{lang('Login.Register.Desc')}</p>\n          <InputText\n            id=\"registration-first-name\"\n            label={lang('Login.Register.FirstName.Placeholder')}\n            onChange={handleFirstNameChange}\n            value={firstName}\n            error={authError && lang(authError)}\n            autoComplete=\"given-name\"\n          />\n          <InputText\n            id=\"registration-last-name\"\n            label={lang('Login.Register.LastName.Placeholder')}\n            onChange={handleLastNameChange}\n            value={lastName}\n            autoComplete=\"family-name\"\n          />\n          {isButtonShown && (\n            <Button type=\"submit\" ripple isLoading={authIsLoading}>{lang('Next')}</Button>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['authIsLoading', 'authError']),\n)(AuthRegister));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\n\nimport { MIN_PASSWORD_LENGTH } from '../../config';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport stopEvent from '../../util/stopEvent';\nimport useLang from '../../hooks/useLang';\nimport useTimeout from '../../hooks/useTimeout';\nimport useAppLayout from '../../hooks/useAppLayout';\n\nimport Button from '../ui/Button';\n\ntype OwnProps = {\n  submitLabel?: string;\n  error?: string;\n  hint?: string;\n  placeholder?: string;\n  description?: string;\n  isLoading?: boolean;\n  shouldDisablePasswordManager?: boolean;\n  shouldShowSubmit?: boolean;\n  shouldResetValue?: boolean;\n  isPasswordVisible?: boolean;\n  clearError: NoneToVoidFunction;\n  noRipple?: boolean;\n  onChangePasswordVisibility: (state: boolean) => void;\n  onInputChange?: (password: string) => void;\n  onSubmit?: (password: string) => void;\n};\n\nconst PasswordForm: FC<OwnProps> = ({\n  isLoading = false,\n  isPasswordVisible,\n  error,\n  hint,\n  placeholder = 'Password',\n  submitLabel = 'Next',\n  description,\n  shouldShowSubmit,\n  shouldResetValue,\n  shouldDisablePasswordManager = false,\n  noRipple = false,\n  clearError,\n  onChangePasswordVisibility,\n  onInputChange,\n  onSubmit,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const lang = useLang();\n\n  const { isMobile } = useAppLayout();\n  const [password, setPassword] = useState('');\n  const [canSubmit, setCanSubmit] = useState(false);\n  const focusDelayTimeoutMs = isMobile ? 550 : 400;\n\n  useEffect(() => {\n    if (shouldResetValue) {\n      setPassword('');\n    }\n  }, [shouldResetValue]);\n\n  useTimeout(() => {\n    if (!IS_TOUCH_ENV) {\n      inputRef.current!.focus();\n    }\n  }, focusDelayTimeoutMs);\n\n  useEffect(() => {\n    if (error) {\n      requestMutation(() => {\n        inputRef.current!.focus();\n        inputRef.current!.select();\n      });\n    }\n  }, [error]);\n\n  function onPasswordChange(e: ChangeEvent<HTMLInputElement>) {\n    if (error) {\n      clearError();\n    }\n\n    const { target } = e;\n    setPassword(target.value);\n    setCanSubmit(target.value.length >= MIN_PASSWORD_LENGTH);\n    if (onInputChange) {\n      onInputChange(target.value);\n    }\n  }\n\n  function togglePasswordVisibility() {\n    onChangePasswordVisibility(!isPasswordVisible);\n  }\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    if (isLoading) {\n      return;\n    }\n\n    if (canSubmit) {\n      onSubmit!(password);\n    }\n  }\n\n  function renderFakeInput() {\n    return (\n      <input\n        type=\"password\"\n        id=\"prevent_autofill\"\n        autoComplete=\"off\"\n        className=\"visually-hidden\"\n        tabIndex={-2}\n      />\n    );\n  }\n\n  return (\n    <form action=\"\" onSubmit={onSubmit ? handleSubmit : stopEvent} autoComplete=\"off\">\n      <div\n        className={buildClassName('input-group password-input', password && 'touched', error && 'error')}\n        dir={lang.isRtl ? 'rtl' : undefined}\n      >\n        {shouldDisablePasswordManager && renderFakeInput()}\n        <input\n          ref={inputRef}\n          className=\"form-control\"\n          type={isPasswordVisible ? 'text' : 'password'}\n          id=\"sign-in-password\"\n          value={password || ''}\n          autoComplete={shouldDisablePasswordManager ? 'one-time-code' : 'current-password'}\n          onChange={onPasswordChange}\n          maxLength={256}\n          dir=\"auto\"\n        />\n        <label>{error || hint || placeholder}</label>\n        <div\n          className=\"div-button toggle-password\"\n          onClick={togglePasswordVisibility}\n          role=\"button\"\n          tabIndex={0}\n          title=\"Toggle password visibility\"\n        >\n          <i className={buildClassName('icon', isPasswordVisible ? 'icon-eye' : 'icon-eye-closed')} />\n        </div>\n      </div>\n      {description && <p className=\"description\">{description}</p>}\n      {onSubmit && (canSubmit || shouldShowSubmit) && (\n        <Button type=\"submit\" ripple={!noRipple} isLoading={isLoading} disabled={!canSubmit}>\n          {submitLabel}\n        </Button>\n      )}\n    </form>\n  );\n};\n\nexport default memo(PasswordForm);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { useCallback, memo } from '../../lib/teact/teact';\n\nimport { STICKER_SIZE_AUTH, STICKER_SIZE_AUTH_MOBILE, STICKER_SIZE_TWO_FA } from '../../config';\nimport { LOCAL_TGS_URLS } from './helpers/animatedAssets';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nimport useTimeout from '../../hooks/useTimeout';\nimport useFlag from '../../hooks/useFlag';\nimport useAppLayout from '../../hooks/useAppLayout';\n\nimport './PasswordMonkey.scss';\n\ntype OwnProps = {\n  isPasswordVisible: boolean;\n  isBig?: boolean;\n};\n\nconst PEEK_MONKEY_SHOW_DELAY = 2000;\nconst SEGMENT_COVER_EYES: [number, number] = [0, 50];\nconst SEGMENT_UNCOVER_EYE: [number, number] = [0, 20];\nconst SEGMENT_COVER_EYE: [number, number] = [20, 0];\n\nconst PasswordMonkey: FC<OwnProps> = ({ isPasswordVisible, isBig }) => {\n  const [isFirstMonkeyLoaded, markFirstMonkeyLoaded] = useFlag(false);\n  const [isPeekShown, markPeekShown] = useFlag(false);\n  const { isMobile } = useAppLayout();\n\n  const stikerSize = isMobile ? STICKER_SIZE_AUTH_MOBILE : STICKER_SIZE_AUTH;\n\n  useTimeout(markPeekShown, PEEK_MONKEY_SHOW_DELAY);\n  const handleFirstMonkeyLoad = useCallback(markFirstMonkeyLoaded, [markFirstMonkeyLoaded]);\n\n  return (\n    <div id=\"monkey\" className={isBig ? 'big' : ''}>\n      {!isFirstMonkeyLoaded && (\n        <div className=\"monkey-preview\" />\n      )}\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'hidden' : 'shown'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyClose}\n        playSegment={SEGMENT_COVER_EYES}\n        noLoop\n        onLoad={handleFirstMonkeyLoad}\n      />\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'shown' : 'hidden'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyPeek}\n        playSegment={isPasswordVisible ? SEGMENT_UNCOVER_EYE : SEGMENT_COVER_EYE}\n        noLoop\n      />\n    </div>\n  );\n};\n\nexport default memo(PasswordMonkey);\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  useState, useEffect, memo, useCallback,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport CropModal from './CropModal';\n\nimport './AvatarEditable.scss';\n\ninterface OwnProps {\n  title?: string;\n  disabled?: boolean;\n  isForForum?: boolean;\n  currentAvatarBlobUrl?: string;\n  onChange: (file: File) => void;\n}\n\nconst AvatarEditable: FC<OwnProps> = ({\n  title = 'Change your profile picture',\n  disabled,\n  isForForum,\n  currentAvatarBlobUrl,\n  onChange,\n}) => {\n  const [selectedFile, setSelectedFile] = useState<File | undefined>();\n  const [croppedBlobUrl, setCroppedBlobUrl] = useState<string | undefined>(currentAvatarBlobUrl);\n\n  useEffect(() => {\n    setCroppedBlobUrl(currentAvatarBlobUrl);\n  }, [currentAvatarBlobUrl]);\n\n  function handleSelectFile(event: ChangeEvent<HTMLInputElement>) {\n    const target = event.target as HTMLInputElement;\n\n    if (!target?.files?.[0]) {\n      return;\n    }\n\n    setSelectedFile(target.files[0]);\n    target.value = '';\n  }\n\n  const handleAvatarCrop = useCallback((croppedImg: File) => {\n    setSelectedFile(undefined);\n    onChange(croppedImg);\n\n    if (croppedBlobUrl && croppedBlobUrl !== currentAvatarBlobUrl) {\n      URL.revokeObjectURL(croppedBlobUrl);\n    }\n    setCroppedBlobUrl(URL.createObjectURL(croppedImg));\n  }, [croppedBlobUrl, currentAvatarBlobUrl, onChange]);\n\n  const handleModalClose = useCallback(() => {\n    setSelectedFile(undefined);\n  }, []);\n\n  const labelClassName = buildClassName(\n    croppedBlobUrl && 'filled',\n    disabled && 'disabled',\n    isForForum && 'rounded-square',\n  );\n\n  return (\n    <div className=\"AvatarEditable\">\n      <label\n        className={labelClassName}\n        role=\"button\"\n        tabIndex={0}\n        title={title}\n      >\n        <input\n          type=\"file\"\n          onChange={handleSelectFile}\n          accept=\"image/png, image/jpeg\"\n        />\n        <i className=\"icon icon-camera-add\" />\n        {croppedBlobUrl && <img src={croppedBlobUrl} alt=\"Avatar\" />}\n      </label>\n      <CropModal file={selectedFile} onClose={handleModalClose} onChange={handleAvatarCrop} />\n    </div>\n  );\n};\n\nexport default memo(AvatarEditable);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useState, memo, useCallback,\n} from '../../lib/teact/teact';\n\nimport { DEBUG } from '../../config';\nimport { blobToFile, blobToDataUri } from '../../util/files';\nimport useLang from '../../hooks/useLang';\n\nimport Button from './Button';\nimport Modal from './Modal';\nimport Loading from './Loading';\n\nimport './CropModal.scss';\n\n// Change to 'base64' to get base64-encoded string\nconst cropperResultOptions: Croppie.ResultOptions & { type: 'blob' } = {\n  type: 'blob',\n  quality: 1,\n  format: 'jpeg',\n  circle: false,\n  size: { width: 1024, height: 1024 },\n};\n\ntype ICroppie = typeof import('croppie');\nlet Croppie: ICroppie;\nlet croppiePromise: Promise<{ default: ICroppie }>;\n\nasync function ensureCroppie() {\n  if (!croppiePromise) {\n    croppiePromise = import('../../lib/croppie') as unknown as Promise<{ default: ICroppie }>;\n    Croppie = (await croppiePromise).default;\n  }\n\n  return croppiePromise;\n}\n\nlet cropper: Croppie;\n\nasync function initCropper(imgFile: Blob) {\n  try {\n    const cropContainer = document.getElementById('avatar-crop');\n    if (!cropContainer) {\n      return;\n    }\n\n    const { offsetWidth, offsetHeight } = cropContainer;\n\n    cropper = new Croppie(cropContainer, {\n      enableZoom: true,\n      boundary: {\n        width: offsetWidth,\n        height: offsetHeight,\n      },\n      viewport: {\n        width: offsetWidth - 16,\n        height: offsetHeight - 16,\n        type: 'circle',\n      },\n    });\n\n    const dataUri = await blobToDataUri(imgFile);\n    await cropper.bind({ url: dataUri });\n  } catch (err) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n  }\n}\n\ntype OwnProps = {\n  file?: Blob;\n  onChange: (file: File) => void;\n  onClose: () => void;\n};\n\nconst CropModal: FC<OwnProps> = ({ file, onChange, onClose }: OwnProps) => {\n  const [isCroppieReady, setIsCroppieReady] = useState(false);\n\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n\n    if (!isCroppieReady) {\n      ensureCroppie().then(() => setIsCroppieReady(true));\n\n      return;\n    }\n\n    initCropper(file);\n  }, [file, isCroppieReady]);\n\n  const lang = useLang();\n\n  const handleCropClick = useCallback(async () => {\n    if (!cropper) {\n      return;\n    }\n\n    const result: Blob | string = await cropper.result(cropperResultOptions);\n    const croppedImg = typeof result === 'string' ? result : blobToFile(result, 'avatar.jpg');\n\n    onChange(croppedImg);\n  }, [onChange]);\n\n  return (\n    <Modal\n      isOpen={Boolean(file)}\n      onClose={onClose}\n      title=\"Drag to reposition\"\n      className=\"CropModal\"\n      hasCloseButton\n    >\n      {isCroppieReady ? (\n        <div id=\"avatar-crop\" />\n      ) : (\n        <Loading />\n      )}\n      <Button\n        className=\"confirm-button\"\n        round\n        color=\"primary\"\n        onClick={handleCropClick}\n        ariaLabel={lang('CropImage')}\n      >\n        <i className=\"icon icon-check\" />\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(CropModal);\n","import type { RefObject } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { useCallback, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { TextPart } from '../../types';\n\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport trapFocus from '../../util/trapFocus';\nimport buildClassName from '../../util/buildClassName';\nimport { enableDirectTextInput, disableDirectTextInput } from '../../util/directInputManager';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useLayoutEffectWithPrevDeps from '../../hooks/useLayoutEffectWithPrevDeps';\nimport useLang from '../../hooks/useLang';\nimport useHistoryBack from '../../hooks/useHistoryBack';\n\nimport Button from './Button';\nimport Portal from './Portal';\n\nimport './Modal.scss';\n\nconst ANIMATION_DURATION = 200;\n\ntype OwnProps = {\n  title?: string | TextPart[];\n  className?: string;\n  isOpen?: boolean;\n  header?: TeactNode;\n  isSlim?: boolean;\n  hasCloseButton?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  children: React.ReactNode;\n  style?: string;\n  onClose: () => void;\n  onCloseAnimationEnd?: () => void;\n  onEnter?: () => void;\n  dialogRef?: RefObject<HTMLDivElement>;\n};\n\ntype StateProps = {\n  shouldSkipHistoryAnimations?: boolean;\n};\n\nconst Modal: FC<OwnProps & StateProps> = ({\n  dialogRef,\n  title,\n  className,\n  isOpen,\n  isSlim,\n  header,\n  hasCloseButton,\n  noBackdrop,\n  noBackdropClose,\n  children,\n  style,\n  onClose,\n  onCloseAnimationEnd,\n  onEnter,\n  shouldSkipHistoryAnimations,\n}) => {\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen, onCloseAnimationEnd, shouldSkipHistoryAnimations, undefined, shouldSkipHistoryAnimations,\n  );\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!isOpen) {\n      return undefined;\n    }\n\n    disableDirectTextInput();\n\n    return enableDirectTextInput;\n  }, [isOpen]);\n\n  const handleEnter = useCallback((e: KeyboardEvent) => {\n    if (!onEnter) {\n      return false;\n    }\n\n    e.preventDefault();\n    onEnter();\n    return true;\n  }, [onEnter]);\n\n  useEffect(() => (\n    isOpen ? captureKeyboardListeners({ onEsc: onClose, onEnter: handleEnter }) : undefined\n  ), [isOpen, onClose, handleEnter]);\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n  });\n\n  useLayoutEffectWithPrevDeps(([prevIsOpen]) => {\n    document.body.classList.toggle('has-open-dialog', Boolean(isOpen));\n\n    if (isOpen || (!isOpen && prevIsOpen !== undefined)) {\n      dispatchHeavyAnimationEvent(ANIMATION_DURATION);\n    }\n\n    return () => {\n      document.body.classList.remove('has-open-dialog');\n    };\n  }, [isOpen]);\n\n  const lang = useLang();\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div className=\"modal-header\">\n        {hasCloseButton && (\n          <Button\n            round\n            color=\"translucent\"\n            size=\"smaller\"\n            ariaLabel={lang('Close')}\n            onClick={onClose}\n          >\n            <i className=\"icon icon-close\" />\n          </Button>\n        )}\n        <div className=\"modal-title\">{title}</div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    'Modal',\n    className,\n    transitionClassNames,\n    noBackdrop && 'transparent-backdrop',\n    isSlim && 'slim',\n  );\n\n  return (\n    <Portal>\n      <div\n        ref={modalRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className=\"modal-container\">\n          <div className=\"modal-backdrop\" onClick={!noBackdropClose ? onClose : undefined} />\n          <div className=\"modal-dialog\" ref={dialogRef}>\n            {renderHeader()}\n            <div className=\"modal-content custom-scroll\" style={style}>\n              {children}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Modal;\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","import type { FC, VirtualElement } from '../../lib/teact/teact';\nimport { useRef, useLayoutEffect } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  children: VirtualElement;\n};\n\nconst Portal: FC<OwnProps> = ({ containerId, className, children }) => {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n    if (className) {\n      element.classList.add(className);\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n};\n\nexport default Portal;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import { useEffect, useLayoutEffect, useRef } from '../lib/teact/teact';\n\nfunction useTimeout(callback: () => void, delay?: number) {\n  const savedCallback = useRef(callback);\n\n  useLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n    const id = setTimeout(() => savedCallback.current(), delay);\n    return () => clearTimeout(id);\n  }, [delay]);\n}\n\nexport default useTimeout;\n","type HandlerName =\n  'onEnter'\n  | 'onBackspace'\n  | 'onDelete'\n  | 'onEsc'\n  | 'onUp'\n  | 'onDown'\n  | 'onLeft'\n  | 'onRight'\n  | 'onTab';\ntype Handler = (e: KeyboardEvent) => void | boolean;\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const handler = options[handlerName];\n    if (!handler) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(handler);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  for (let i = length - 1; i >= 0; i--) {\n    const handler = handlers[handlerName][i]!;\n    if (handler(e) !== false) {\n      e.stopPropagation();\n      break;\n    }\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const handler = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => cb === handler);\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","let counter = 0;\n\nexport function disableDirectTextInput() {\n  counter += 1;\n}\n\nexport function enableDirectTextInput() {\n  counter -= 1;\n}\n\nexport function getIsDirectTextInputDisabled() {\n  return counter > 0;\n}\n","import type React from '../lib/teact/teact';\n\nconst stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport default stopEvent;\n"],"names":["memo","withGlobal","global","pick","_ref","authPhoneNumber","authIsLoading","authError","setAuthCode","returnToAuthPhoneNumber","clearAuthError","getActions","lang","useLang","inputRef","useRef","code","setCode","useState","isTracking","setIsTracking","useEffect","IS_TOUCH_ENV","current","focus","useHistoryBack","isActive","onBack","onCodeChange","useCallback","e","currentTarget","target","value","replace","substr","length","React","id","className","onClick","role","tabIndex","title","langPack","InputText","ref","placeholder","onInput","error","autoComplete","inputMode","Loading","authHint","setAuthPassword","showPassword","setShowPassword","handleChangePasswordVisibility","isVisible","handleSubmit","password","MonkeyPassword","isPasswordVisible","PasswordForm","clearError","hint","isLoading","onChangePasswordVisibility","onSubmit","signUp","uploadProfilePhoto","isButtonShown","setIsButtonShown","croppedFile","setCroppedFile","firstName","setFirstName","lastName","setLastName","handleFirstNameChange","event","handleLastNameChange","action","method","preventDefault","file","AvatarEditable","onChange","label","Button","type","ripple","submitLabel","description","shouldShowSubmit","shouldResetValue","shouldDisablePasswordManager","noRipple","onInputChange","isMobile","useAppLayout","setPassword","canSubmit","setCanSubmit","focusDelayTimeoutMs","useTimeout","requestMutation","select","stopEvent","buildClassName","dir","isRtl","undefined","MIN_PASSWORD_LENGTH","maxLength","disabled","SEGMENT_COVER_EYES","SEGMENT_UNCOVER_EYE","SEGMENT_COVER_EYE","isBig","isFirstMonkeyLoaded","markFirstMonkeyLoaded","useFlag","isPeekShown","markPeekShown","stikerSize","STICKER_SIZE_AUTH_MOBILE","STICKER_SIZE_AUTH","handleFirstMonkeyLoad","AnimatedSticker","size","STICKER_SIZE_TWO_FA","tgsUrl","LOCAL_TGS_URLS","playSegment","noLoop","onLoad","isForForum","currentAvatarBlobUrl","selectedFile","setSelectedFile","croppedBlobUrl","setCroppedBlobUrl","handleAvatarCrop","croppedImg","URL","revokeObjectURL","createObjectURL","handleModalClose","labelClassName","files","accept","src","alt","CropModal","onClose","cropperResultOptions","quality","format","circle","width","height","Croppie","croppiePromise","cropper","isCroppieReady","setIsCroppieReady","async","imgFile","cropContainer","document","getElementById","offsetWidth","offsetHeight","enableZoom","boundary","viewport","dataUri","blobToDataUri","bind","url","err","DEBUG","console","initCropper","default","ensureCroppie","then","handleCropClick","result","blobToFile","Modal","isOpen","Boolean","hasCloseButton","round","color","ariaLabel","dialogRef","isSlim","header","noBackdrop","noBackdropClose","children","style","onCloseAnimationEnd","onEnter","shouldSkipHistoryAnimations","shouldRender","transitionClassNames","useShowTransition","modalRef","disableDirectTextInput","enableDirectTextInput","handleEnter","captureKeyboardListeners","onEsc","element","handleKeyDown","key","stopPropagation","focusableElements","Array","from","querySelectorAll","currentFocusedIndex","findIndex","em","isSameNode","activeElement","newFocusedIndex","shiftKey","addEventListener","removeEventListener","trapFocus","useLayoutEffectWithPrevDeps","_ref2","prevIsOpen","body","classList","toggle","dispatchHeavyAnimationEvent","remove","fullClassName","Portal","containerId","elementRef","createElement","useLayoutEffect","container","querySelector","add","appendChild","TeactDOM","removeChild","cb","dependencies","debugKey","prevDepsRef","prevDeps","callback","delay","savedCallback","setTimeout","clearTimeout","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onDelete","onBackspace","onUp","onDown","onLeft","onRight","onTab","options","hasActiveHandlers","Object","keys","forEach","handlerName","handler","currentEventHandlers","push","index","splice","releaseKeyboardListener","values","some","keyHandlers","i","counter","getIsDirectTextInputDisabled"],"sourceRoot":""}